:root{--color-bg: #f6ebfc;--color-surface: #ffffff;--color-primary: #601a7d;--color-primary-text: #ffffff;--color-secondary: #f6ebfc;--color-border: #ebd1f5;--color-text: #54176e;--color-text-light: #68357e;--color-accent: #358ad8;--color-danger: #f2007d;--radius-sm: 4px;--backstage-width: 320px;--canvas-bg: #fff;--ruler-bg: #f8f9fa;--ruler-border: #ced4da;--ruler-text: #333;--input-bg: #fff;--input-text: var(--color-text);--crosshair-color: rgba(53, 138, 216, .9)}body[data-theme=dark]{--color-bg: #28153d;--color-surface: #261638;--color-primary: #b955d0;--color-primary-text: #261638;--color-secondary: #261638;--color-border: #3d245c;--color-text: #e6e1ef;--color-text-light: #a79ebd;--color-accent: #b957d6;--color-danger: #410546;--color-active-bg: #3d245c;--color-active-text: #e6e1ef;--canvas-bg: #261638;--ruler-bg: #1a0f26;--ruler-border: #3d245c;--ruler-text: #e6e1ef;--input-bg: #3d245c;--input-text: #e6e1ef;--crosshair-color: rgba(185, 87, 214, .7)}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background-color:var(--color-bg);color:var(--color-text);display:flex;flex-direction:column;height:100vh;overflow:hidden;position:relative;left:0;transition:left .3s ease-in-out}body>main{padding-top:55px;display:flex;flex-grow:1;min-height:0;height:calc(100vh - 55px)}.app-header{display:flex;align-items:center;background-color:var(--color-primary);color:var(--color-primary-text);padding:0 1rem;height:55px;flex-shrink:0;z-index:1001;position:fixed;width:100%;top:0}.logo{font-weight:700;font-size:1.2rem;display:flex;align-items:center}.main-menu{margin-left:1rem;display:flex;gap:.25rem}.menu-trigger{font-family:inherit;font-size:14px;color:var(--color-primary-text);background-color:transparent;border:none;padding:.5rem 1rem;border-radius:var(--radius-sm);cursor:pointer;transition:background-color .2s}.menu-trigger:hover{background-color:#ffffff1a}.menu-trigger.active{background-color:var(--color-secondary);color:var(--color-primary)}body[data-theme=dark] .menu-trigger.active{background-color:var(--color-active-bg);color:var(--color-active-text)}.app-content{display:flex;flex-grow:1;height:100%;min-height:0}.workspace{flex-grow:1;padding:1rem;display:flex;flex-direction:column;gap:1rem;overflow:auto;background-color:var(--color-bg)}.hidden-input{display:none}.theme-selector{margin-left:auto;margin-right:2rem;z-index:1002}.language-selector{margin-right:2rem;z-index:1002}#lang-trigger{display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;cursor:pointer;padding:.5rem .75rem;border-radius:var(--radius-sm);color:var(--color-primary-text);font-size:14px}#lang-trigger:hover{background-color:#ffffff1a}#lang-trigger svg{width:12px;height:12px;fill:currentColor;margin-left:5px}.lang-menu{position:absolute;top:100%;right:0;background-color:var(--color-surface);border:1px solid var(--color-border);box-shadow:0 4px 12px #00000026;border-radius:var(--radius-sm);min-width:150px;padding:5px 0;display:none}.lang-menu button{display:block;width:100%;text-align:left;padding:8px 15px;background:none;border:none;cursor:pointer;font-size:14px;color:var(--color-primary)}.lang-menu button:hover{background-color:var(--color-secondary)}body[data-theme=dark] .lang-menu button:hover{background-color:var(--color-active-bg);color:var(--color-active-text)}.toolbar{width:202px;flex-shrink:0;background-color:var(--color-surface);border-right:1px solid var(--color-border);padding:1.5rem;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:column;gap:1.5rem;min-height:0}.toolbar-section{display:flex;flex-direction:column;gap:.25rem}.toolbar-header{font-size:.99rem;font-weight:600;margin:0;padding:6px 4px;border-bottom:1px solid var(--color-secondary);color:var(--color-primary);display:flex;justify-content:space-between;align-items:center;cursor:pointer;transition:background-color .2s;border-radius:var(--radius-sm)}.toolbar-header:hover{background-color:#eef2f5}body[data-theme=dark] .toolbar-header{font-size:.9rem;padding:4px 6px;background-color:var(--color-bg);color:var(--color-text);border-bottom-color:var(--color-border);border:1px solid var(--color-border);margin-bottom:.25rem}body[data-theme=dark] .toolbar-header:hover{background-color:var(--color-active-bg);color:var(--color-text)}.toolbar-header span{transition:transform .3s;font-size:.8em}.toolbar-header.collapsed+.toolbar-content{display:none}.toolbar-header.collapsed span{transform:rotate(-90deg)}.toolbar-content{display:flex;flex-direction:column;gap:.75rem;padding-left:4px;margin-top:.5rem}.toolbar-content label{font-size:.9rem;font-weight:500;color:var(--color-text-light)}.toolbar-content hr{border:none;border-top:1px solid var(--color-secondary);width:100%;margin:.5rem 0}button,select,input{padding:7px 11px;font-size:12.6px;border:1px solid var(--color-border);border-radius:var(--radius-sm);background-color:var(--input-bg);color:var(--input-text);transition:all .2s;box-sizing:border-box}button:not(.menu-trigger):not(#backstage-close-btn):not(.tool-btn){background-color:var(--color-secondary);color:var(--color-primary);cursor:pointer;font-weight:500;border-color:#dbe2e8}body[data-theme=dark] button:not(.menu-trigger):not(#backstage-close-btn):not(.tool-btn){background-color:var(--color-primary);color:var(--color-primary-text);border-color:var(--color-border)}button:not(.menu-trigger):not(#backstage-close-btn):not(.tool-btn):hover{background-color:#dce4eb}body[data-theme=dark] button:not(.menu-trigger):not(#backstage-close-btn):not(.tool-btn):hover{background-color:var(--color-accent);color:var(--color-text)}button.danger{background-color:var(--color-danger)!important;color:#fff!important}button.danger:hover{background-color:#c0392b!important}button svg{width:18px;height:18px;fill:currentColor}button span{margin-left:8px}.tool-buttons{display:grid;grid-template-columns:repeat(auto-fill,minmax(59px,1fr));gap:8px}.tool-btn{display:flex;flex-direction:column;align-items:center;justify-content:center;height:58px;background-color:var(--color-secondary);border:1px solid var(--color-border);border-radius:var(--radius-sm);cursor:pointer;transition:all .2s ease;padding:7px 4px;color:var(--color-text-light);font-size:10.8px;font-weight:500}body[data-theme=dark] .tool-btn{background-color:var(--color-active-bg);color:var(--color-text)}.tool-btn:hover{background-color:#dce4eb;border-color:#b8c5d0}body[data-theme=dark] .tool-btn:hover{background-color:var(--color-primary);color:var(--color-primary-text)}.tool-btn.active{background-color:var(--color-primary);border-color:var(--color-primary);color:var(--color-primary-text)}body[data-theme=dark] .tool-btn.active{background-color:var(--color-accent);border-color:var(--color-accent);color:#fff}.tool-btn.has-temp-shape{position:relative;border-color:var(--color-danger)}.tool-btn.has-temp-shape:after{content:"";position:absolute;top:5px;right:5px;width:8px;height:8px;background-color:var(--color-danger);border-radius:50%;border:1px solid var(--color-surface)}.tool-btn svg{width:25px;height:25px;margin-bottom:4px;fill:currentColor}.tool-btn span{margin-left:0}.toolbar-separator{grid-column:1 / -1;text-align:left;font-size:.8rem;font-weight:600;color:var(--color-text-light);margin-top:1rem;margin-bottom:.25rem;padding-left:4px}.form-label-large{font-size:.75rem;font-weight:500}.toolbar-separator:first-of-type{margin-top:0}#deleteBtn,#undoBtn,#redoBtn{display:flex;align-items:center;justify-content:center}.button-group{display:flex;gap:.5rem;flex-wrap:wrap}.button-group>button{flex-grow:1}.grid-control,.checkbox-label{display:flex;align-items:center;gap:8px;font-size:.81rem;color:var(--color-text-light)}.grid-control input[type=number]{width:54px;padding:6px}.canvas-wrapper{flex-grow:1;display:grid;grid-template-columns:30px 1fr;grid-template-rows:30px 1fr;gap:0;overflow:hidden;position:relative;border:1px solid var(--color-border);background-color:var(--color-surface)}.corner-box{background-color:var(--ruler-bg);border-right:1px solid var(--ruler-border);border-bottom:1px solid var(--ruler-border);grid-column:1 / 2;grid-row:1 / 2}#ruler-top{background-color:var(--ruler-bg);border-bottom:1px solid var(--ruler-border);grid-column:2 / 3;grid-row:1 / 2;width:100%}#ruler-left{background-color:var(--ruler-bg);border-right:1px solid var(--ruler-border);grid-column:1 / 2;grid-row:2 / 3;height:100%}.canvas-container{grid-column:2 / 3;grid-row:2 / 3;overflow:hidden;position:relative;height:100%}canvas#canvas{background-color:var(--canvas-bg);display:block}#floor3DView{display:none;flex:1 1 auto;min-height:250px;border:1px solid var(--color-border);border-radius:var(--radius-sm);flex-direction:column}.floor-3d-header{display:flex;align-items:center;justify-content:flex-end;padding:4px 8px;background-color:var(--color-primary);color:var(--color-primary-text);flex-shrink:0}body[data-theme=dark] .floor-3d-header{background-color:var(--color-bg);color:var(--color-text)}.window-controls button{background:var(--color-secondary);border:1px solid var(--color-border);color:var(--color-primary-text);font-size:14px;width:28px;height:24px;line-height:1;padding:0;cursor:pointer;margin-left:6px;border-radius:var(--radius-sm);box-shadow:0 1px 2px #0000000d}.window-controls button:hover{background-color:#dce4eb}body[data-theme=dark] .window-controls button:hover{background-color:var(--color-active-bg)}.window-controls{gap:4px;display:flex}#floor3DSelect{padding:4px 8px;font-size:14px;border:1px solid var(--color-border);border-radius:var(--radius-sm);background-color:var(--input-bg);color:var(--input-text);margin-right:auto}body[data-theme=dark] #floor3DSelect{background-color:var(--color-active-bg);color:var(--color-text);border-color:var(--color-border)}.crosshair{position:absolute;background-color:var(--crosshair-color);pointer-events:none;z-index:1000}.crosshair.horizontal{width:100%;height:1px;left:0}.crosshair.vertical{width:1px;height:100%;top:0}.scrollbar{position:absolute;background:#f1f1f1;border-radius:5px;z-index:1001;display:none}body[data-theme=dark] .scrollbar{background:var(--color-secondary)}body[data-theme=dark] .thumb{background:var(--color-text-light)}body[data-theme=dark] .thumb:hover{background:var(--color-text)}#scrollbar-x{bottom:0;left:0;width:calc(100% - 12px);height:12px}#scrollbar-y{top:0;right:0;width:12px;height:calc(100% - 12px)}.thumb{position:absolute;background:#c1c1c1;border-radius:5px;cursor:pointer}.thumb:hover{background:#a8a8a8}#thumb-x{height:100%}#thumb-y{width:100%}body.backstage-visible{left:var(--backstage-width)}.backstage-panel{position:fixed;top:0;left:0;height:100%;width:var(--backstage-width);background-color:var(--color-secondary);border-right:1px solid var(--color-border);z-index:2000;transform:translate(-100%);transition:transform .3s ease-in-out;display:flex;flex-direction:column;visibility:hidden}body[data-theme=dark] .backstage-panel{background-color:var(--color-surface);border-right-color:var(--color-border)}.backstage-panel.visible{transform:translate(0);visibility:visible}.backstage-header{display:flex;align-items:center;padding:.5rem;flex-shrink:0;background-color:var(--color-secondary);color:var(--color-text)}body[data-theme=dark] .backstage-header{background-color:var(--color-bg);color:var(--color-text)}#backstage-close-btn{background:none;border:none;cursor:pointer;padding:.5rem;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:background-color .2s}#backstage-close-btn:hover{background-color:#00000014}#backstage-close-btn svg{width:28px;height:28px;fill:var(--color-text)}.backstage-title{font-size:1.2rem;font-weight:600;margin-left:1rem}.backstage-content{padding-top:1rem;overflow-y:auto;flex:1;min-height:0}.backstage-content ul{list-style:none;padding:0;margin:0}.backstage-content button{width:calc(100% - 3rem);padding:.625rem 1rem;font-size:.9rem;font-weight:500;text-align:left;background:none;border:none;cursor:pointer;display:flex;align-items:center;gap:.75rem;transition:background-color .2s,border-color .2s,color .2s,fill .2s;color:var(--color-text);margin:.25rem 1.5rem;border-radius:var(--radius-sm)}body[data-theme=dark] .backstage-content button{background-color:var(--color-surface);border:1px solid var(--color-border)}.backstage-content button:hover{background-color:var(--color-accent);color:#fff}.backstage-content button:hover svg{fill:#fff}body[data-theme=dark] .backstage-content button:hover{background-color:var(--color-bg);border-color:var(--color-border);color:var(--color-text)}body[data-theme=dark] .backstage-content button:hover svg{fill:var(--color-text)}.backstage-content button svg{width:20px;height:20px;fill:var(--color-text-light);flex-shrink:0}.backstage-content button svg circle{fill:var(--color-text-light)}.backstage-content button:hover svg circle{fill:#fff}body[data-theme=dark] .backstage-content button:hover svg circle{fill:var(--color-text)}#overview-stats-panel{display:flex;flex-direction:column;gap:.8rem;font-size:1rem;color:var(--color-primary);padding:0 1.5rem}#overview-stats-panel>div{display:flex;justify-content:space-between;align-items:center;padding-bottom:.5rem;border-bottom:1px solid var(--color-border);gap:1rem}#overview-stats-panel span.value{font-weight:600;color:var(--color-text);text-align:right;max-width:60%;word-wrap:break-word;overflow-wrap:break-word}#overview-stats-panel .floor-detail{padding-left:10px;font-size:.9rem;border-bottom:none}.code-view-wrapper{padding:0 1.5rem 1rem}#live-geojson-output{display:none;background:#282c34;color:#abb2bf;padding:1em;max-height:calc(100vh - 250px);overflow-y:auto;border-radius:var(--radius-sm);white-space:pre;font-family:monospace;font-size:.8rem;border:1px solid var(--color-border)}.modal{position:fixed;top:0;left:0;width:100%;height:100%;z-index:3000;display:flex;align-items:center;justify-content:center}.modal.hidden{display:none}.modal-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080}.modal-content{position:relative;background-color:var(--color-surface);padding:2rem;border-radius:var(--radius-sm);max-width:500px;width:90%;box-shadow:0 5px 15px #0000004d}.modal-close-btn{position:absolute;top:.5rem;right:.75rem;font-size:1.5rem;font-weight:700;background:none;border:none;cursor:pointer;color:var(--color-text-light)}.modal-content h4{margin-top:1.5rem;margin-bottom:.5rem;color:var(--color-primary)}.modal-content ul{padding-left:20px}.modal-content li{margin-bottom:.5rem}.context-menu{display:none;position:absolute;z-index:4000;background-color:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-sm);box-shadow:0 4px 12px #00000026;min-width:180px;font-size:14px}.context-menu ul{list-style:none;padding:4px 0;margin:0}.context-menu li{padding:8px 16px;cursor:pointer;transition:background-color .2s;position:relative;color:var(--color-text)}.context-menu li:hover{background-color:var(--color-accent);color:#fff}.context-menu li.danger:hover{background-color:var(--color-danger)}.context-menu li.separator{height:1px;background-color:var(--color-border);margin:4px 0;padding:0}.context-menu li.has-submenu:after{content:"â–¶";position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size:10px}.context-menu .submenu{display:none;position:absolute;left:100%;top:-5px;background-color:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-sm);box-shadow:0 4px 12px #00000026;max-height:200px;overflow-y:auto}.context-menu .submenu li:hover{background-color:#eef2f5;color:var(--color-text)}body[data-theme=dark] .context-menu .submenu li:hover{background-color:var(--color-active-bg);color:var(--color-active-text)}.context-menu li.has-submenu:hover>.submenu{display:block}.type-preview{margin-top:1.5rem;padding:1rem;border:1px solid var(--color-border);border-radius:var(--radius-sm);background:var(--color-secondary)}.type-preview__area{margin-top:.75rem}.type-preview__area-rect{height:140px;border:2px solid var(--color-border);border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-weight:600;transition:background-color .2s,border-color .2s}.type-preview__point{display:flex;align-items:center;gap:.75rem;margin-top:1rem}.type-preview__point-icon{width:48px;height:48px;border-radius:50%;background:var(--color-surface);display:flex;align-items:center;justify-content:center;border:1px solid var(--color-border)}
