:root{--color-bg: #f4f7f6;--color-surface: #ffffff;--color-primary: #113F67;--color-primary-text: #ffffff;--color-secondary: #f0f0f0;--color-border: #dfe4ea;--color-text: #2c3e50;--color-text-light: #576c81;--color-accent: #3498db;--color-danger: #e74c3c;--radius-sm: 4px;--backstage-width: 320px}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background-color:var(--color-bg);color:var(--color-text);display:flex;flex-direction:column;height:100vh;overflow:hidden;position:relative;left:0;transition:left .3s ease-in-out}body.backstage-visible{left:var(--backstage-width)}.backstage-panel{position:fixed;top:0;left:0;height:100%;width:var(--backstage-width);background-color:var(--color-secondary);border-right:1px solid var(--color-border);z-index:2000;transform:translate(-100%);transition:transform .3s ease-in-out;display:flex;flex-direction:column}.backstage-panel.visible{transform:translate(0)}.backstage-header{display:flex;align-items:center;padding:.5rem;flex-shrink:0}#backstage-close-btn{background:none;border:none;cursor:pointer;padding:.5rem;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:background-color .2s}#backstage-close-btn:hover{background-color:#00000014}#backstage-close-btn svg{width:28px;height:28px;fill:var(--color-text)}.backstage-title{font-size:1.2rem;font-weight:600;margin-left:1rem}.backstage-content{padding-top:1rem}.backstage-content ul{list-style:none;padding:0;margin:0}.backstage-content button{width:100%;padding:1rem 1.5rem;font-size:1rem;font-weight:500;text-align:left;background:none;border:none;cursor:pointer;display:flex;align-items:center;gap:1rem;transition:background-color .2s;color:var(--color-text)}.backstage-content button:hover{background-color:var(--color-accent);color:#fff}.backstage-content button:hover svg{fill:#fff}.backstage-content button svg{width:24px;height:24px;fill:var(--color-text-light);transition:fill .2s}.backstage-content button svg circle{fill:var(--color-text-light)}.backstage-content button:hover svg circle{fill:#fff}.app-header{display:flex;align-items:center;background-color:var(--color-primary);color:var(--color-primary-text);padding:0 1rem;height:50px;flex-shrink:0;z-index:1001;position:fixed;width:100%;top:0}body>main{padding-top:50px}.logo{font-weight:700;font-size:1.2rem}.main-menu{margin-left:1rem;display:flex;gap:.25rem}.menu-trigger{font-family:inherit;font-size:14px;color:var(--color-primary-text);background-color:transparent;border:none;padding:.5rem 1rem;border-radius:var(--radius-sm);cursor:pointer;transition:background-color .2s}.menu-trigger:hover{background-color:#ffffff1a}.menu-trigger.active{background-color:var(--color-secondary);color:var(--color-primary)}.app-content{display:flex;flex-grow:1;overflow:hidden}.toolbar{width:280px;flex-shrink:0;background-color:var(--color-surface);border-right:1px solid var(--color-border);padding:1.5rem;overflow-y:auto;display:flex;flex-direction:column;gap:1.5rem}.toolbar-section{display:flex;flex-direction:column;gap:.25rem}.toolbar-header{font-size:1.1rem;font-weight:600;margin:0;padding:6px 4px;border-bottom:1px solid var(--color-secondary);color:var(--color-primary);display:flex;justify-content:space-between;align-items:center;cursor:pointer;transition:background-color .2s;border-radius:var(--radius-sm)}.toolbar-header:hover{background-color:#eef2f5}.toolbar-header span{transition:transform .3s;font-size:.8em}.toolbar-header.collapsed+.toolbar-content{display:none}.toolbar-header.collapsed span{transform:rotate(-90deg)}.toolbar-content{display:flex;flex-direction:column;gap:.75rem;padding-left:4px;margin-top:.5rem}.toolbar-content label{font-size:.9rem;font-weight:500;color:var(--color-text-light)}.toolbar-content hr{border:none;border-top:1px solid var(--color-secondary);width:100%;margin:.5rem 0}#overview-stats-panel{display:flex;flex-direction:column;gap:.8rem;font-size:1rem;color:var(--color-text-light);padding:0 1.5rem}#overview-stats-panel>div{display:flex;justify-content:space-between;align-items:center;padding-bottom:.5rem;border-bottom:1px solid var(--color-border)}#overview-stats-panel span.value{font-weight:600;color:var(--color-text);text-align:right}#overview-stats-panel .floor-detail{padding-left:10px;font-size:.9rem;border-bottom:none}.code-view-wrapper{padding:0 1.5rem 1rem}#live-geojson-output{display:none;background:#282c34;color:#abb2bf;padding:1em;max-height:calc(100vh - 250px);overflow-y:auto;border-radius:var(--radius-sm);white-space:pre;font-family:monospace;font-size:.8rem;border:1px solid var(--color-border)}.workspace{flex-grow:1;padding:1rem;display:flex;flex-direction:column;gap:1rem;overflow:auto;background-color:var(--color-bg)}.canvas-wrapper{flex-grow:1;display:grid;grid-template-columns:30px auto;grid-template-rows:30px auto;gap:0;overflow:hidden;position:relative;border:1px solid var(--color-border);background-color:var(--color-surface)}.corner-box{background-color:#f8f9fa;border-right:1px solid #ced4da;border-bottom:1px solid #ced4da;grid-column:1 / 2;grid-row:1 / 2}#ruler-top{background-color:#f8f9fa;border-bottom:1px solid #ced4da;grid-column:2 / 3;grid-row:1 / 2;width:100%}#ruler-left{background-color:#f8f9fa;border-right:1px solid #ced4da;grid-column:1 / 2;grid-row:2 / 3;height:100%}.canvas-container{grid-column:2 / 3;grid-row:2 / 3;overflow:auto;position:relative}canvas#canvas{background-color:#fff;cursor:none;display:block}#floor3DView{display:none;flex-shrink:0;height:250px;border:1px solid var(--color-border);border-radius:var(--radius-sm)}.hidden-input{display:none}.tool-buttons{display:grid;grid-template-columns:repeat(auto-fill,minmax(40px,1fr));gap:8px}.tool-btn{display:flex;align-items:center;justify-content:center;width:100%;height:40px;background-color:var(--color-secondary);border:1px solid var(--color-border);border-radius:var(--radius-sm);cursor:pointer;transition:all .2s ease;padding:0;color:var(--color-text-light)}button,select,input{padding:8px 12px;font-size:14px;border:1px solid var(--color-border);border-radius:var(--radius-sm);background-color:#fff;transition:all .2s;color:var(--color-text);box-sizing:border-box}button:not(.menu-trigger):not(#backstage-close-btn){background-color:var(--color-secondary);color:var(--color-primary);cursor:pointer;font-weight:500;border-color:#dbe2e8}button:not(.menu-trigger):not(#backstage-close-btn):hover{background-color:#dce4eb}button.danger{background-color:var(--color-danger)!important;color:#fff!important}button.danger:hover{background-color:#c0392b!important}button svg{width:20px;height:20px;fill:currentColor}button span{margin-left:8px}#deleteBtn,#undoBtn,#redoBtn{display:flex;align-items:center;justify-content:center}.tool-btn.active{background-color:var(--color-primary);border-color:var(--color-primary);color:var(--color-primary-text)}.button-group{display:flex;gap:.5rem}.button-group>button{flex-grow:1}.grid-control,.checkbox-label{display:flex;align-items:center;gap:8px;font-size:.9rem;color:var(--color-text-light)}.grid-control input[type=number]{width:60px;padding:6px}.modal{position:fixed;top:0;left:0;width:100%;height:100%;z-index:3000;display:flex;align-items:center;justify-content:center}.modal.hidden{display:none}.modal-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080}.modal-content{position:relative;background-color:var(--color-surface);padding:2rem;border-radius:var(--radius-sm);max-width:500px;width:90%;box-shadow:0 5px 15px #0000004d}.modal-close-btn{position:absolute;top:.5rem;right:.75rem;font-size:1.5rem;font-weight:700;background:none;border:none;cursor:pointer;color:var(--color-text-light)}.modal-content h4{margin-top:1.5rem;margin-bottom:.5rem;color:var(--color-primary)}.modal-content ul{padding-left:20px}.modal-content li{margin-bottom:.5rem}
