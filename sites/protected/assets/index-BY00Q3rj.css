:root{--color-bg: #f6ebfc;--color-surface: #ffffff;--color-primary: #601a7d;--color-primary-text: #ffffff;--color-secondary: #f6ebfc;--color-border: #ebd1f5;--color-text: #54176e;--color-text-light: #68357e;--color-accent: #358ad8;--color-danger: #f2007d;--radius-sm: 4px;--radius-xs: 2px;--backstage-width: 320px;--header-height: 60px;--canvas-bg: #fff;--ruler-bg: #f8f9fa;--ruler-border: #ced4da;--ruler-text: #333;--input-bg: #fff;--input-text: var(--color-text);--crosshair-color: rgba(96, 26, 125, .85);--toolbar-width: 260px;--page-scroll-track: var(--color-secondary);--page-scroll-thumb: var(--color-text-light)}body[data-theme=dark]{--color-bg: #28153d;--color-surface: #261638;--color-primary: #b955d0;--color-primary-text: #261638;--color-secondary: #261638;--color-border: #3d245c;--color-text: #e6e1ef;--color-text-light: #a79ebd;--color-accent: #b957d6;--color-danger: #410546;--color-active-bg: #3d245c;--color-active-text: #e6e1ef;--canvas-bg: #261638;--ruler-bg: #1a0f26;--ruler-border: #3d245c;--ruler-text: #e6e1ef;--input-bg: #3d245c;--input-text: #e6e1ef;--crosshair-color: rgba(185, 87, 214, .7);--page-scroll-track: var(--color-secondary);--page-scroll-thumb: var(--color-text);--header-height: 60px}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background-color:var(--color-bg);color:var(--color-text);display:flex;flex-direction:column;height:100vh;overflow:hidden;position:relative;left:0;transition:left .3s ease-in-out}body>main{padding-top:var(--header-height);display:flex;flex-grow:1;min-height:0;height:calc(100vh - var(--header-height))}.app-header{display:flex;align-items:center;background-color:var(--color-primary);color:var(--color-primary-text);padding:0 1.5rem;height:60px;flex-shrink:0;z-index:1001;position:fixed;width:100%;top:0;box-shadow:0 2px 8px #00000026;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.logo{font-weight:700;font-size:1.3rem;display:flex;align-items:center;letter-spacing:.5px;text-shadow:0 2px 4px rgba(0,0,0,.1)}.main-menu{margin-left:1rem;display:flex;gap:.25rem}.menu-trigger{font-family:inherit;font-size:14px;color:var(--color-primary-text);background-color:transparent;border:none;padding:.5rem 1rem;border-radius:var(--radius-sm);cursor:pointer;transition:background-color .2s}.menu-trigger:hover{background-color:#ffffff1a}.menu-trigger.active,body[data-theme=dark] .menu-trigger.active{background-color:#ffffff42;color:var(--color-primary-text)}.main-menu .menu-trigger{background-color:#ffffff1f;color:var(--color-primary-text);border:none;border-radius:18px;padding:6px 14px;box-shadow:0 2px 6px #00000040;transition:transform .15s ease,filter .15s ease,box-shadow .15s ease}.main-menu .menu-trigger:hover{background-color:#ffffff2e;transform:translateY(-1px);filter:brightness(1.08);box-shadow:0 4px 10px #0000004d}.main-menu .menu-trigger.active{background-color:#ffffff42;color:var(--color-primary-text)}#theme-trigger{border-radius:50%;width:36px;height:36px;padding:0;display:flex;align-items:center;justify-content:center;background-color:var(--color-primary);color:var(--color-primary-text);border:none;margin-left:.5rem;box-shadow:0 2px 6px #00000040;transition:all .2s ease}#theme-trigger:hover{transform:scale(1.03);filter:brightness(1.08);box-shadow:0 4px 10px #0000004d}#theme-trigger img{width:20px;height:20px;transition:transform .3s ease}.app-content{display:flex;flex-grow:1;height:100%;min-height:0;overflow:hidden;overscroll-behavior:contain}.app-content::-webkit-scrollbar{width:0;height:0}.app-content{scrollbar-width:none}.workspace::-webkit-scrollbar{width:0;height:0}.workspace{scrollbar-width:none}.page-scrollbar{position:fixed;top:var(--header-height);left:var(--toolbar-width);width:12px;height:calc(100vh - var(--header-height));background:var(--page-scroll-track);border-left:1px solid var(--color-border);border-right:1px solid var(--color-border);z-index:1000;display:none!important}.page-scrollbar .thumb{width:100%;background:var(--page-scroll-thumb);border-radius:6px}.workspace{flex-grow:1;padding:1rem;display:flex;flex-direction:column;gap:1rem;overflow:auto;overscroll-behavior:contain;background-color:var(--color-bg)}.hidden-input{display:none}.theme-selector{margin-left:auto;margin-right:2rem;z-index:1002}.language-selector{margin-right:2rem;z-index:1002;position:relative}#lang-trigger{display:flex;align-items:center;justify-content:center;background-color:var(--color-primary);color:var(--color-primary-text);border:none;cursor:pointer;padding:0 1rem;height:36px;border-radius:20px;font-size:14px;font-weight:500;box-shadow:0 2px 6px #00000040;transition:all .2s ease}#lang-trigger:hover{transform:scale(1.03);filter:brightness(1.08);box-shadow:0 4px 10px #0000004d}#lang-trigger svg{width:12px;height:12px;fill:currentColor;margin-left:5px}#lang-trigger img{width:18px;height:18px;margin-right:5px;vertical-align:middle}.lang-menu{position:absolute;top:100%;left:0;background-color:var(--color-primary);color:var(--color-primary-text);border:none;box-shadow:0 6px 18px #00000040;border-radius:12px;min-width:170px;padding:6px 4px;display:none}.lang-menu button{display:block;width:100%;text-align:left;padding:10px 14px;background:transparent;border:none;cursor:pointer;font-size:14px;color:var(--color-primary-text);border-radius:8px}.lang-menu button:hover{background-color:#ffffff29;color:var(--color-primary-text)}.toolbar{box-sizing:border-box;width:var(--toolbar-width);flex-shrink:0;background-color:var(--color-surface);border-right:1px solid var(--color-border);display:flex;flex-direction:column;min-height:0;position:sticky;top:var(--header-height);height:calc(100vh - var(--header-height));align-self:flex-start;z-index:1002;overscroll-behavior:contain}.toolbar-scroll-content{flex-grow:1;overflow-y:auto;overflow-x:hidden;padding:1rem 1.5rem;display:flex;flex-direction:column;gap:1.5rem;scrollbar-color:var(--page-scroll-thumb) var(--page-scroll-track);scrollbar-width:thin;padding-bottom:24px;scrollbar-gutter:stable both-edges}.toolbar-scroll-content:after{content:"";display:block;height:12px;flex-shrink:0}.toolbar-scroll-content::-webkit-scrollbar{width:12px;height:12px}.toolbar-scroll-content::-webkit-scrollbar-track{background:var(--page-scroll-track)}.toolbar-scroll-content::-webkit-scrollbar-thumb{background:var(--page-scroll-thumb);border-radius:6px}.toolbar-footer{flex-shrink:0;padding:1rem 1.5rem;border-top:1px solid var(--color-border);background-color:var(--color-surface);z-index:2}.toolbar-section{display:flex;flex-direction:column;gap:.25rem}.toolbar-header{font-size:.95rem;font-weight:600;margin:0;padding:8px 12px;background-color:#00000008;border:1px solid transparent;color:var(--color-text);display:flex;justify-content:space-between;align-items:center;cursor:pointer;transition:all .2s ease;border-radius:var(--radius-sm);-webkit-user-select:none;user-select:none}.toolbar-header:hover{background-color:#0000000f}body[data-theme=dark] .toolbar-header{background-color:#ffffff0d;color:var(--color-text);border:1px solid transparent}body[data-theme=dark] .toolbar-header:hover{background-color:#ffffff1a}.toolbar-header span{transition:transform .3s;font-size:.8em}.toolbar-header.collapsed+.toolbar-content{display:none}.toolbar-header.collapsed span{transform:rotate(-90deg)}.toolbar-content{display:flex;flex-direction:column;gap:.75rem;padding-left:0;margin-top:.5rem}.toolbar-section#view-layers-controls .toolbar-content{gap:.5rem}.toolbar-content label{font-size:.9rem;font-weight:500;color:var(--color-text-light)}.unit-hint{font-size:.75rem;color:var(--color-text-light);margin-top:4px;text-align:right}.input-with-suffix{position:relative}.input-with-suffix input[type=number]{width:100%;padding-right:30px}.input-with-suffix .suffix{position:absolute;right:8px;top:50%;transform:translateY(-50%);color:var(--color-text-light);font-size:.85rem;pointer-events:none}.toolbar-content hr{border:none;border-top:1px solid var(--color-secondary);width:100%;margin:.5rem 0}button,select,input{padding:7px 11px;font-size:12.6px;border:1px solid var(--color-border);border-radius:var(--radius-sm);background-color:var(--input-bg);color:var(--input-text);transition:all .2s;box-sizing:border-box}button:not(.menu-trigger):not(#backstage-close-btn):not(.tool-btn){background-color:var(--color-secondary);color:var(--color-primary);cursor:pointer;font-weight:500;border-color:#dbe2e8}.toolbar-content button:not(.tool-btn):not(.mini-btn){height:32px}body[data-theme=dark] button:not(.menu-trigger):not(#backstage-close-btn):not(.tool-btn){background-color:var(--color-active-bg);color:var(--color-text);border-color:var(--color-border)}button:not(.menu-trigger):not(#backstage-close-btn):not(.tool-btn):hover{background-color:#dce4eb}body[data-theme=dark] button:not(.menu-trigger):not(#backstage-close-btn):not(.tool-btn):hover{background-color:var(--color-primary);color:var(--color-primary-text)}button.danger{background-color:var(--color-danger)!important;color:#fff!important}button.danger:hover{background-color:#7a1e58!important}button svg{width:18px;height:18px;fill:currentColor}button span{margin-left:8px}.action-btn{width:100%;margin-top:8px;justify-content:center;display:flex;align-items:center;height:40px!important}.tool-buttons{display:grid;grid-template-columns:1fr 1fr;gap:8px}.tool-btn{display:flex;flex-direction:column;align-items:center;justify-content:center;height:64px;background-color:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-md, 8px);cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);padding:8px 4px;color:var(--color-text);font-size:11px;font-weight:500;box-shadow:0 1px 2px #0000000d}body[data-theme=dark] .tool-btn{background-color:#ffffff08;color:var(--color-text);border-color:transparent}.tool-btn:hover{background-color:#f0f4f8;border-color:var(--color-primary-light);transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}body[data-theme=dark] .tool-btn:hover{background-color:#ffffff14;color:var(--color-text);box-shadow:0 4px 8px #0000004d}.tool-btn.active{background-color:var(--color-primary);border-color:var(--color-primary);color:var(--color-primary-text);box-shadow:inset 0 2px 4px #0000001a;transform:none}body[data-theme=dark] .tool-btn.active{background-color:var(--color-accent);border-color:var(--color-accent);color:#fff;box-shadow:0 0 12px rgba(var(--color-accent-rgb),.4)}#mode-merge.merge-ready{background-color:var(--color-primary);border-color:var(--color-primary);color:var(--color-primary-text)}body[data-theme=dark] #mode-merge.merge-ready{background-color:var(--color-accent);border-color:var(--color-accent);color:#fff}.tool-btn.has-temp-shape{position:relative;border-color:var(--color-danger)}.tool-btn.has-temp-shape:after{content:"";position:absolute;top:5px;right:5px;width:8px;height:8px;background-color:var(--color-danger);border-radius:50%;border:1px solid var(--color-surface)}.tool-btn svg{width:25px;height:25px;margin-bottom:4px;fill:currentColor}.tool-btn span{margin-left:0}.toolbar-separator{grid-column:1 / -1;text-align:left;font-size:.8rem;font-weight:600;color:var(--color-text-light);margin-top:1rem;margin-bottom:.25rem;padding-left:4px}.form-label-large{font-size:.75rem;font-weight:500;display:block;margin-bottom:4px}h4.form-subtitle{font-size:.9rem;font-weight:600;color:var(--color-primary);margin:.25rem 0}body[data-theme=dark] h4.form-subtitle{color:var(--color-text)}.toolbar-content #beacon-fields input[type=text],.toolbar-content #beacon-fields input[type=date],.toolbar-content #beacon-fields input[type=number]{display:block;width:100%;margin-bottom:14px}.toolbar-content #beacon-fields h4.form-subtitle{margin-bottom:8px}.toolbar-content #properties-content label{display:block;margin-bottom:6px}input[type=date],input[type=time]{color-scheme:light dark;background-color:var(--input-bg);color:var(--input-text);border-color:var(--color-border);accent-color:var(--color-accent)}input[type=date]::-webkit-calendar-picker-indicator{filter:saturate(1.2) contrast(1.1);opacity:.9}body[data-theme=dark] input[type=date]::-webkit-calendar-picker-indicator{filter:invert(.9) hue-rotate(270deg) saturate(1.2) contrast(1.1);opacity:1}input[type=date]:focus,input[type=time]:focus{outline:none;box-shadow:0 0 0 2px var(--color-primary);border-color:var(--color-primary)}.toolbar-content #properties-content input[type=text],.toolbar-content #properties-content select{display:block;width:100%;margin-bottom:16px}.toolbar-separator:first-of-type{margin-top:0}#deleteBtn,#undoBtn,#redoBtn{display:flex;align-items:center;justify-content:center}.button-group{display:flex;gap:.5rem;flex-wrap:wrap}.button-group>button{flex-grow:1;min-height:32px}.grid-control,.checkbox-label{display:flex;align-items:center;gap:6px;font-size:.81rem;color:var(--color-text-light)}.grid-control{align-items:flex-start}.grid-control>label{min-width:80px}.grid-control .grid-steppers{display:grid;grid-template-columns:24px 56px 24px;gap:2px;align-items:center;width:max-content}.grid-control .grid-steppers .mini-btn{width:24px;height:24px}.grid-control .grid-steppers input[type=number]{width:56px;height:24px;text-align:center;font-size:16px;font-weight:500;color:var(--color-text)}.grid-control input[type=number]{width:120px;max-width:100%;padding:4px 8px;appearance:textfield;-moz-appearance:textfield}.grid-control input[type=number]::-webkit-outer-spin-button,.grid-control input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.grid-control .mini-btn{padding:2px 6px;font-size:11px;line-height:1;background-color:var(--color-secondary);color:var(--color-primary);border:1px solid var(--color-border);border-radius:var(--radius-xs)}body[data-theme=dark] .grid-control .mini-btn{background-color:var(--color-active-bg);color:var(--color-text)}.grid-control .mini-btn:hover{background-color:#dce4eb}body[data-theme=dark] .grid-control .mini-btn:hover{background-color:var(--color-primary);color:var(--color-primary-text)}.toolbar-content input[type=checkbox]{accent-color:var(--color-primary)}body[data-theme=dark] .toolbar-content input[type=checkbox]{accent-color:var(--color-accent)}.checkbox-label input[type=checkbox]{appearance:none;width:18px;height:18px;border:2px solid var(--color-border);border-radius:4px;background-color:var(--input-bg);position:relative;outline:none;transition:all .15s ease}.checkbox-label input[type=checkbox]:hover{border-color:var(--color-primary)}body[data-theme=dark] .checkbox-label input[type=checkbox]:hover{border-color:var(--color-accent)}.checkbox-label input[type=checkbox]:focus{box-shadow:0 0 0 2px var(--color-primary);border-color:var(--color-primary)}body[data-theme=dark] .checkbox-label input[type=checkbox]:focus{box-shadow:0 0 0 2px var(--color-accent);border-color:var(--color-accent)}.checkbox-label input[type=checkbox]:checked{background-color:var(--color-primary);border-color:var(--color-primary)}body[data-theme=dark] .checkbox-label input[type=checkbox]:checked{background-color:var(--color-accent);border-color:var(--color-accent)}.checkbox-label input[type=checkbox]:checked:after{content:"";position:absolute;inset:0;background-color:#fff;mask:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path fill='white' d='M6.3 12.1L2.6 8.4l1.4-1.4 2.3 2.3 5.7-5.7 1.4 1.4-7.1 7.1z'/></svg>") no-repeat center / 14px 14px;-webkit-mask:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path fill='white' d='M6.3 12.1L2.6 8.4l1.4-1.4 2.3 2.3 5.7-5.7 1.4 1.4-7.1 7.1z'/></svg>") no-repeat center / 14px 14px}.checkbox-label input[type=checkbox]:disabled{opacity:.55;cursor:not-allowed}.checkbox-label input[type=checkbox]:checked+span{color:var(--color-primary);font-weight:600}body[data-theme=dark] .checkbox-label input[type=checkbox]:checked+span{color:var(--color-accent)}.grid-control .grid-steppers{width:100%}.grid-control .grid-steppers .mini-btn,.grid-control .grid-steppers input[type=number]{height:26px}#show3DViewBtn{width:100%;height:32px}#show3DViewBtn{position:relative;z-index:1;width:100%;height:40px;font-weight:600}.icon-wheelchair{width:25px;height:25px;display:block;background-repeat:no-repeat;background-position:center;background-size:contain;margin-bottom:4px;filter:none;background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='25' height='25' viewBox='0 0 16 16' fill='none' stroke='currentColor' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'><circle cx='9.5' cy='3' r='1.3'/><path d='M9.5 4.5v3'/><path d='M9.5 6.5h3'/><circle cx='6' cy='11' r='3.2'/><path d='M9.5 8l2.5 3.5'/></svg>")}.canvas-wrapper{flex-grow:1;display:grid;grid-template-columns:30px 1fr;grid-template-rows:30px 1fr;gap:0;overflow:hidden;position:relative;border:1px solid var(--color-border);background-color:var(--color-surface)}.corner-box{background-color:var(--ruler-bg);border-right:1px solid var(--ruler-border);border-bottom:1px solid var(--ruler-border);grid-column:1 / 2;grid-row:1 / 2}#ruler-top{background-color:var(--ruler-bg);border-bottom:1px solid var(--ruler-border);grid-column:2 / 3;grid-row:1 / 2;width:100%}#ruler-left{background-color:var(--ruler-bg);border-right:1px solid var(--ruler-border);grid-column:1 / 2;grid-row:2 / 3;height:100%}.canvas-container{grid-column:2 / 3;grid-row:2 / 3;overflow:hidden;position:relative;height:100%;overscroll-behavior:contain}canvas#canvas{background-color:var(--canvas-bg);display:block}.coordinate-display{position:absolute;bottom:24px;left:10px;background-color:#ffffffd9;padding:4px 8px;border-radius:4px;font-size:12px;font-family:monospace;color:var(--color-text);border:1px solid var(--color-border);pointer-events:none;z-index:1002;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);box-shadow:0 2px 4px #0000001a}body[data-theme=dark] .coordinate-display{background-color:#1e1e1ed9;color:var(--color-text);border-color:var(--color-border)}#floor3DView{display:none;flex:1 1 auto;min-height:250px;border:1px solid var(--color-border);border-radius:var(--radius-sm);flex-direction:column;position:relative}.floor-3d-header{display:flex;align-items:center;justify-content:flex-start;padding:4px 8px;background-color:var(--color-primary);color:var(--color-primary-text);flex-shrink:0;box-shadow:0 2px 6px #00000014;border-bottom:1px solid var(--color-border)}body[data-theme=dark] .floor-3d-header{background-color:var(--color-bg);color:var(--color-text);box-shadow:none;border-bottom:1px solid var(--color-border)}.window-controls button{background:#ffffff1f;border:1px solid rgba(255,255,255,.22);color:var(--color-primary-text);width:34px;height:28px;padding:0;cursor:pointer;margin-left:8px;border-radius:12px;display:inline-flex;align-items:center;justify-content:center;transition:background-color .14s ease,transform 80ms ease,box-shadow .14s ease,color .14s ease,opacity .14s ease;-webkit-backdrop-filter:saturate(1.2) blur(6px);backdrop-filter:saturate(1.2) blur(6px);box-shadow:inset 0 0 0 1px #ffffff14,0 2px 6px #00000029}.window-controls button:hover{background-color:#fff3;transform:translateY(-1px);box-shadow:inset 0 0 0 1px #ffffff1f,0 4px 12px #00000038}body[data-theme=dark] .window-controls button:hover{background-color:#ffffff38;color:var(--color-primary-text)}.window-controls button:active{transform:translateY(0) scale(.98);box-shadow:inset 0 0 0 1px #ffffff1a,0 2px 6px #00000029}.window-controls svg{width:18px;height:18px;opacity:.95}.window-controls{gap:8px;display:flex;margin-left:auto}#floor3DSelect{padding:4px 8px;font-size:14px;border:1px solid var(--color-border);border-radius:var(--radius-sm);background-color:var(--input-bg);color:var(--input-text);margin-right:auto}body[data-theme=dark] #floor3DSelect{background-color:var(--color-active-bg);color:var(--color-text);border-color:var(--color-border)}.crosshair{position:absolute;background-color:var(--crosshair-color);pointer-events:none;z-index:1000}.crosshair.horizontal{width:100%;height:1px;left:0}.crosshair.vertical{width:1px;height:100%;top:0}#floor3DRenderer{scrollbar-color:var(--page-scroll-thumb) var(--page-scroll-track);scrollbar-width:thin}#floor3DRenderer::-webkit-scrollbar{width:12px;height:12px}#floor3DRenderer::-webkit-scrollbar-track{background:var(--page-scroll-track)}#floor3DRenderer::-webkit-scrollbar-thumb{background:var(--page-scroll-thumb);border-radius:6px}.scrollbar{position:absolute;background:var(--page-scroll-track);border-radius:5px;z-index:1001;display:none;box-sizing:border-box}#scrollbar-x{bottom:0;left:0;right:12px;width:auto;height:12px;padding:0 10px;box-sizing:border-box}#scrollbar-y{top:0;bottom:12px;right:0;width:12px;height:auto;padding:10px 0;box-sizing:border-box;pointer-events:auto}.scrollbar#scrollbar-y:before,.scrollbar#scrollbar-y:after{content:"";position:absolute;left:50%;transform:translate(-50%);border-left:6px solid transparent;border-right:6px solid transparent;pointer-events:none}.scrollbar#scrollbar-y:before{top:0;border-bottom:8px solid var(--page-scroll-thumb)}.scrollbar#scrollbar-y:after{bottom:0;border-top:8px solid var(--page-scroll-thumb)}.scrollbar#scrollbar-x:before,.scrollbar#scrollbar-x:after{content:"";position:absolute;top:50%;transform:translateY(-50%);border-top:6px solid transparent;border-bottom:6px solid transparent;pointer-events:none}.scrollbar#scrollbar-x:before{left:0;border-right:8px solid var(--page-scroll-thumb)}.scrollbar#scrollbar-x:after{right:0;border-left:8px solid var(--page-scroll-thumb)}.thumb{position:absolute;background:var(--page-scroll-thumb);border-radius:5px;cursor:pointer}.thumb:hover{opacity:.85}#thumb-x{height:100%}#thumb-y{width:100%}body.backstage-visible{left:var(--backstage-width)}.backstage-panel{position:fixed;top:0;left:0;height:100%;width:var(--backstage-width);background-color:var(--color-secondary);border-right:1px solid var(--color-border);z-index:2000;transform:translate(-100%);transition:transform .3s ease-in-out;display:flex;flex-direction:column;visibility:hidden}body[data-theme=dark] .backstage-panel{background-color:var(--color-surface);border-right-color:var(--color-border)}.backstage-panel.visible{transform:translate(0);visibility:visible}.backstage-header{display:flex;align-items:center;padding:.5rem;flex-shrink:0;background-color:var(--color-secondary);color:var(--color-text)}body[data-theme=dark] .backstage-header{background-color:var(--color-bg);color:var(--color-text)}#backstage-close-btn{background:none;border:none;cursor:pointer;padding:.5rem;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:background-color .2s}#backstage-close-btn:hover{background-color:#00000014}#backstage-close-btn svg{width:28px;height:28px;fill:var(--color-text)}.backstage-title{font-size:1.2rem;font-weight:600;margin-left:1rem}.backstage-content{padding-top:1rem;overflow-y:auto;flex:1;min-height:0;scrollbar-color:var(--page-scroll-thumb) var(--page-scroll-track);scrollbar-width:thin}#backstage-file-content{display:flex;flex-direction:column;position:relative;padding-bottom:44px}.sponsor-footer{margin-top:auto}.backstage-content::-webkit-scrollbar{width:12px;height:12px}.backstage-content::-webkit-scrollbar-track{background:var(--page-scroll-track)}.backstage-content::-webkit-scrollbar-thumb{background:var(--page-scroll-thumb);border-radius:6px}.backstage-content ul{list-style:none;padding:0;margin:0}.backstage-content button{width:calc(100% - 3rem);padding:.625rem 1rem;font-size:.9rem;font-weight:500;text-align:left;background:none;border:1px solid var(--color-border);cursor:pointer;display:flex;align-items:center;gap:.75rem;transition:background-color .2s,border-color .2s,color .2s,fill .2s;color:var(--color-text);margin:.25rem 1.5rem;border-radius:var(--radius-sm)}body[data-theme=dark] .backstage-content button{background-color:var(--color-surface);border:1px solid var(--color-border)}.backstage-content button:hover{background-color:var(--color-accent);color:#fff}.backstage-content button:hover svg{fill:#fff}body[data-theme=dark] .backstage-content button:hover{background-color:var(--color-bg);border-color:var(--color-border);color:var(--color-text)}body[data-theme=dark] .backstage-content button:hover svg{fill:var(--color-text)}.backstage-content button svg{width:20px;height:20px;fill:var(--color-text-light);flex-shrink:0}.backstage-content button svg circle{fill:var(--color-text-light)}.backstage-content button:hover svg circle{fill:#fff}body[data-theme=dark] .backstage-content button:hover svg circle{fill:var(--color-text)}#overview-stats-panel{display:flex;flex-direction:column;gap:.8rem;font-size:1rem;color:var(--color-primary);padding:0 1.5rem}#overview-floor-list{padding:0 1.5rem 1rem;display:flex;flex-direction:column;gap:1rem}#overview-floor-list .floor-block{display:flex;flex-direction:column;gap:.5rem}#overview-beacon-list{padding:0 1.5rem 1rem;display:flex;flex-direction:column;gap:.5rem}#overview-beacon-list .floor-card{border:1px solid var(--color-border);border-radius:var(--radius-sm);padding:.5rem .75rem;display:flex;align-items:center;gap:.75rem;background-color:var(--color-surface)}#overview-beacon-list .floor-meta{display:flex;flex-direction:column;gap:2px}#overview-beacon-list .floor-meta .name{font-weight:600}#overview-beacon-list .floor-meta .counts{font-size:.9rem;color:var(--color-text-light)}#overview-floor-list .floor-card{border:1px solid var(--color-border);border-radius:var(--radius-sm);padding:.5rem .75rem;display:flex;align-items:center;gap:.75rem;background-color:var(--color-surface)}#overview-floor-list .floor-thumb{width:48px;height:48px;border-radius:var(--radius-xs);object-fit:cover;flex-shrink:0;display:none}#overview-floor-list .floor-card.has-thumb .floor-thumb{display:block}#overview-floor-list .floor-meta{display:flex;flex-direction:column;gap:2px}#overview-floor-list .floor-meta .name{font-weight:600}#overview-floor-list .floor-meta .counts{font-size:.9rem;color:var(--color-text-light)}#overview-floor-list .beacon-toggle{align-self:stretch;padding:.375rem .625rem;font-size:.85rem;font-weight:500;color:var(--color-text);background:none;border:1px solid var(--color-border);border-radius:var(--radius-sm);cursor:pointer;width:100%;margin:.25rem 0;display:flex;justify-content:space-between;align-items:center}#overview-floor-list .beacon-toggle:hover{background-color:var(--color-accent);color:#fff}#overview-floor-list .beacon-section{display:none;padding-left:0}#overview-floor-list .beacon-section .beacon-card{border:1px solid var(--color-border);border-radius:var(--radius-sm);padding:.5rem .75rem;display:flex;align-items:center;gap:.75rem;background-color:var(--color-surface)}#overview-floor-list .beacon-section .beacon-meta{display:flex;flex-direction:column;gap:2px}#overview-floor-list .beacon-section .beacon-meta .name{font-weight:600}#overview-floor-list .beacon-section .beacon-meta .counts{font-size:.9rem;color:var(--color-text-light)}#overview-floor-list .area-section .area-card{border:1px solid var(--color-border);border-radius:var(--radius-sm);padding:.5rem .75rem;display:flex;align-items:center;gap:.75rem;background-color:var(--color-surface)}#overview-floor-list .area-section .area-meta{display:flex;flex-direction:column;gap:2px}#overview-floor-list .area-section .area-meta .name{font-weight:600}#overview-floor-list .area-section .area-meta .counts{font-size:.9rem;color:var(--color-text-light)}#overview-stats-panel .accessible-rooms-panel{padding:0 1.5rem .5rem}#overview-stats-panel .accessible-rooms-panel .beacon-toggle{width:auto;margin:.25rem .5rem .25rem 0;padding:.3rem .55rem;font-size:.82rem;display:inline-flex}#overview-stats-panel>div{display:flex;justify-content:space-between;align-items:center;padding-bottom:.5rem;border-bottom:1px solid var(--color-border);gap:1rem}#overview-stats-panel span.value{font-weight:600;color:var(--color-text);text-align:right;max-width:60%;word-wrap:break-word;overflow-wrap:break-word}#overview-stats-panel .floor-detail{padding-left:10px;font-size:.9rem;border-bottom:none}.code-view-wrapper{padding:0 1.5rem 1rem}#live-geojson-output{display:none;background:#282c34;color:#abb2bf;padding:1em;max-height:calc(100vh - 250px);overflow-y:auto;border-radius:var(--radius-sm);white-space:pre;font-family:monospace;font-size:.8rem;border:1px solid var(--color-border)}.server-load-panel{border:1px solid var(--color-border);border-radius:var(--radius-sm);padding:1rem;margin:.5rem 1.5rem 1.5rem;display:flex;flex-direction:column;gap:.8rem}.server-load-panel.hidden{display:none}.server-load-row{display:flex;align-items:center;gap:.8rem;justify-content:flex-start}.server-row-actions{display:flex;flex-direction:column;gap:.4rem}.server-load-row{justify-content:space-between}.server-load-row .server-row-actions{margin-left:auto;width:auto;align-items:flex-end}.server-load-row label{min-width:60px;font-weight:500}.server-load-row input,.server-load-row select{flex:1;padding:.4rem;border:1px solid var(--color-border);border-radius:var(--radius-xs);background-color:var(--color-bg);color:var(--color-text)}.server-load-row button{width:auto;margin:0;padding:.4rem .8rem;white-space:nowrap}.server-load-row .server-row-actions button{width:160px}.server-load-row button:disabled{opacity:.5;cursor:not-allowed}.server-load-row .btn-compact{padding:.35rem .6rem;font-size:.85rem;border-radius:var(--radius-xs)}.server-load-row .btn-danger,body[data-theme=dark] .server-load-row .btn-danger{border-color:var(--color-danger);color:var(--color-danger)}.server-load-row .btn-danger:hover{background-color:var(--color-danger);color:#fff}.server-load-row .btn-compact svg{width:16px;height:16px}.server-load-row .icon-only{padding:.35rem .45rem;border-radius:var(--radius-xs)}.server-load-row .icon-only svg{width:16px;height:16px}.server-save-hint{font-size:.9rem;color:var(--color-text-light);margin-left:auto}.server-project-details{background-color:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius-xs);padding:.8rem;margin-top:.5rem}.server-project-details h4{margin:0 0 .5rem;font-size:.95rem;font-weight:600;color:var(--color-text)}.detail-grid{display:grid;grid-template-columns:max-content 1fr;gap:.4rem 1rem;font-size:.9rem}.detail-item{display:contents}.detail-label{color:var(--color-text-light);font-weight:500}.sponsor-display{display:flex;flex-direction:column;gap:6px}.sponsor-display p{margin:0;font-size:10px;letter-spacing:.15em;text-transform:uppercase;opacity:.6;white-space:nowrap}.sponsor-images{display:flex;flex-wrap:wrap;gap:8px;align-items:center}.sponsor-logo{height:30px;width:auto;object-fit:contain;opacity:.85}@supports (aspect-ratio: 1 / 1){.sponsor-logo{aspect-ratio:auto}}.sponsor-button-logos{display:flex;align-items:center;gap:8px;margin-right:8px}.sponsor-footer{padding:8px 12px;border-top:1px solid var(--color-border);position:absolute;bottom:0;left:0;right:0;background:var(--color-secondary)}body[data-theme=dark] .sponsor-footer{background:var(--color-surface)}.sponsor-footer p{margin:0;font-size:14px;color:var(--color-text);opacity:.8;letter-spacing:.02em}.modal{position:fixed;top:0;left:0;width:100%;height:100%;z-index:3000;display:flex;align-items:center;justify-content:center}.modal.hidden{display:none}.modal-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080}.modal-content{position:relative;background-color:var(--color-surface);padding:2rem;border-radius:var(--radius-sm);max-width:500px;width:90%;max-height:75vh;overflow-y:auto;box-shadow:0 5px 15px #0000004d}.modal-content h2{margin:0 0 .5rem;background:linear-gradient(90deg,var(--color-primary),var(--color-accent));-webkit-background-clip:text;background-clip:text;color:transparent}.modal-content p{margin:.25rem 0 .75rem}.modal-content li{position:relative;padding-left:.25rem}.modal-content li::marker{color:transparent}.modal-content li:before{content:"";position:absolute;left:-1rem;top:.45rem;width:8px;height:8px;border-radius:50%;background:linear-gradient(90deg,var(--color-primary),var(--color-accent))}.intro-logo{display:flex;justify-content:center;margin-bottom:.75rem}.intro-logo img{height:72px;width:auto}.intro-logos{display:flex;justify-content:center;align-items:center;gap:12px;flex-wrap:wrap;margin:.5rem 0 .75rem;opacity:.95}.intro-logos .intro-logo-img{height:28px;width:auto;filter:drop-shadow(0 1px 3px rgba(0,0,0,.2))}.modal-close-btn{position:absolute;top:.5rem;right:.75rem;font-size:1.5rem;font-weight:700;background:none;border:none;cursor:pointer;color:var(--color-text-light)}.modal-content h4{margin-top:1.5rem;margin-bottom:.5rem;color:var(--color-primary)}.modal-content ul{padding-left:20px}.modal-content li{margin-bottom:.5rem}.context-menu{display:none;position:absolute;z-index:4000;background-color:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-sm);box-shadow:0 4px 12px #00000026;min-width:180px;font-size:14px}.context-menu ul{list-style:none;padding:4px 0;margin:0}.context-menu li{padding:8px 16px;cursor:pointer;transition:background-color .2s;position:relative;color:var(--color-text)}.context-menu li:hover{background-color:var(--color-accent);color:#fff}.context-menu li.danger:hover{background-color:var(--color-danger)}.context-menu li.separator{height:1px;background-color:var(--color-border);margin:4px 0;padding:0}.context-menu li.has-submenu:after{content:"â–¶";position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size:10px}.context-menu .submenu{display:none;position:absolute;left:100%;top:-5px;background-color:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-sm);box-shadow:0 4px 12px #00000026;max-height:200px;overflow-y:auto}.context-menu .submenu li:hover{background-color:#eef2f5;color:var(--color-text)}body[data-theme=dark] .context-menu .submenu li:hover{background-color:var(--color-active-bg);color:var(--color-active-text)}.context-menu li.has-submenu:hover>.submenu{display:block}.type-preview{margin-top:1.5rem;padding:1rem;border:1px solid var(--color-border);border-radius:var(--radius-sm);background:var(--color-secondary)}.type-preview__area{margin-top:.75rem}.type-preview__area-rect{height:140px;border:2px solid var(--color-border);border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-weight:600;transition:background-color .2s,border-color .2s}.type-preview__point{display:flex;align-items:center;gap:.75rem;margin-top:1rem}.type-preview__point-icon{width:48px;height:48px;border-radius:50%;background:var(--color-surface);display:flex;align-items:center;justify-content:center;border:1px solid var(--color-border)}.modal-input{width:100%;padding:10px 12px;font-size:14px;border:2px solid var(--color-accent);border-radius:10px;background-color:var(--input-bg);color:var(--input-text);outline:none;box-shadow:0 0 0 3px #358ad826}body[data-theme=dark] .modal-input{box-shadow:0 0 0 3px #b957d62e}.modal-input:focus{box-shadow:0 0 0 4px #358ad840}body[data-theme=dark] .modal-input:focus{box-shadow:0 0 0 4px #b957d64d}.modal-actions{display:flex;gap:.75rem;justify-content:flex-end;margin-top:1rem}.modal-actions .btn-primary{background-color:#00c4d8!important;color:#081018!important;border:1px solid #00b1c3!important;border-radius:10px;padding:8px 14px;box-shadow:0 8px 20px #00c4d840}.modal-actions .btn-primary:hover{background-color:#00b1c3!important}.modal-actions button:not(.btn-primary){background-color:var(--color-secondary);color:var(--color-text);border:1px solid var(--color-border);border-radius:10px;padding:8px 14px}.modal-actions button:not(.btn-primary):hover{background-color:var(--color-active-bg)}.imd-date-picker{position:absolute;z-index:5000;width:280px;background:var(--color-surface);border:1px solid var(--color-border);border-radius:12px;box-shadow:0 8px 24px #00000040;overflow:hidden;display:none}.imd-date-picker.open{display:block}.imd-date-picker__header{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;background:linear-gradient(90deg,var(--color-primary),var(--color-accent));color:var(--color-primary-text)}.imd-date-picker__header button{background:none;border:none;color:var(--color-primary-text);font-size:18px;width:28px;height:28px;border-radius:var(--radius-sm);cursor:pointer}.imd-date-picker__header button:hover{background:#fff3}.imd-date-picker__month{font-weight:600}.imd-date-picker__grid{display:grid;grid-template-columns:repeat(7,1fr);gap:2px;padding:8px}.imd-date-picker__dow{text-align:center;font-size:12px;color:var(--color-text-light);padding:4px 0}.imd-date-picker__day{text-align:center;padding:6px 0;border-radius:8px;cursor:pointer;color:var(--color-text)}.imd-date-picker__day:hover{background-color:var(--color-secondary)}.imd-date-picker__day--outside{opacity:.35}.imd-date-picker__day--weekend{color:#c0392b}body[data-theme=dark] .imd-date-picker__day--weekend{color:#ff6b6b}.imd-date-picker__day--today{outline:2px solid var(--color-accent)}.imd-date-picker__day--selected{background:var(--color-accent);color:#fff}.imd-date-picker__footer{display:flex;justify-content:space-between;padding:8px;border-top:1px solid var(--color-border)}.imd-date-picker__footer button{padding:6px 10px;border-radius:8px;border:1px solid var(--color-border);background:var(--color-secondary);color:var(--color-text);cursor:pointer}.imd-date-picker__footer button:hover{background:var(--color-active-bg)}.imd-date-picker__footer .primary{background:var(--color-accent);border-color:var(--color-accent);color:#fff}.imd-date-picker__footer .primary:hover{filter:brightness(.95)}.spinner{width:36px;height:36px;margin:0 auto;border:4px solid rgba(255,255,255,.25);border-top-color:#00c4d8;border-radius:50%;animation:spin .9s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}
